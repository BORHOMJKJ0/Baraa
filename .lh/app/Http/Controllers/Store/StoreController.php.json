{
    "sourceFile": "app/Http/Controllers/Store/StoreController.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1746898314880,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1746898320695,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -112,9 +112,9 @@\n      *     ),\n      *\n      *     @OA\\Response(\n      *         response=400,\n-     *         description=\"Invalid sort column or direction. Allowed columns: name, address, created_at, updated_at. Allowed directions: asc, desc.\",\n+     *         description=\"Invalid sort column or direction. Allowed columns: name, address. Allowed directions: asc, desc.\",\n      *\n      *         @OA\\JsonContent(\n      *\n      *             @OA\\Property(property=\"successful\", type=\"boolean\", example=false),\n"
                }
            ],
            "date": 1746898314880,
            "name": "Commit-0",
            "content": "<?php\n\nnamespace App\\Http\\Controllers\\Store;\n\nuse App\\Http\\Controllers\\Controller;\nuse App\\Http\\Requests\\Store\\StoreCreateRequest;\nuse App\\Http\\Requests\\Store\\StoreUpdateRequest;\nuse App\\Models\\Store\\Store;\nuse App\\Services\\Store\\StoreService;\nuse Illuminate\\Http\\JsonResponse;\nuse Illuminate\\Http\\Request;\n\nclass StoreController extends Controller\n{\n    public function __construct(protected StoreService $storeService) {}\n\n    /**\n     * @OA\\SecurityScheme(\n     *     securityScheme=\"bearerAuth\",\n     *     type=\"http\",\n     *     scheme=\"bearer\",\n     *     bearerFormat=\"JWT\",\n     *     description=\"Enter JWT Bearer token in the format 'Bearer {token}'\"\n     * )\n     */\n    /**\n     * @OA\\Get(\n     *     path=\"/stores\",\n     *     tags={\"Store\"},\n     *     summary=\"Retrieve all stores with pagination and sorting\",\n     *     security={{\"bearerAuth\":{}}},\n     *\n     *     @OA\\Parameter(\n     *         name=\"page\",\n     *         in=\"query\",\n     *         required=false,\n     *         description=\"Page number\",\n     *\n     *         @OA\\Schema(type=\"integer\", example=1)\n     *     ),\n     *\n     *     @OA\\Parameter(\n     *         name=\"items\",\n     *         in=\"query\",\n     *         required=false,\n     *         description=\"Number of items per page\",\n     *\n     *         @OA\\Schema(type=\"integer\", example=5)\n     *     ),\n     *\n     *     @OA\\Parameter(\n     *         name=\"direction\",\n     *         in=\"query\",\n     *         required=false,\n     *         description=\"Sorting direction (asc or desc)\",\n     *\n     *         @OA\\Schema(type=\"string\", enum={\"asc\", \"desc\"}, example=\"asc\")\n     *     ),\n     *\n     *     @OA\\Parameter(\n     *         name=\"column\",\n     *         in=\"query\",\n     *         required=false,\n     *         description=\"Column to sort by (name, address, created_at, updated_at)\",\n     *\n     *         @OA\\Schema(type=\"string\", enum={\"name\", \"address\"}, example=\"name\")\n     *     ),\n     *\n     *     @OA\\Response(\n     *         response=200,\n     *         description=\"Stores retrieved successfully\",\n     *\n     *         @OA\\JsonContent(\n     *\n     *             @OA\\Property(property=\"successful\", type=\"boolean\", example=true),\n     *             @OA\\Property(property=\"message\", type=\"string\", example=\"Stores retrieved successfully\"),\n     *             @OA\\Property(property=\"status_code\", type=\"integer\", example=200),\n     *             @OA\\Property(\n     *                 property=\"data\",\n     *                 type=\"object\",\n     *                 @OA\\Property(\n     *                     property=\"Stores\",\n     *                     type=\"array\",\n     *\n     *                     @OA\\Items(\n     *                         type=\"object\",\n     *\n     *                         @OA\\Property(property=\"id\", type=\"integer\", example=10),\n     *                         @OA\\Property(property=\"name\", type=\"string\", example=\"Dietrich and Sons\"),\n     *                         @OA\\Property(property=\"image\", type=\"string\", example=\"https://via.placeholder.com/640x480.png/0033ff?text=technics+sit\"),\n     *                         @OA\\Property(property=\"address\", type=\"string\", example=\"21464 Ortiz Pines\\nEast Ethelton, MO 97340\"),\n     *                         @OA\\Property(property=\"category\", type=\"string\", example=\"fruits\")\n     *                     )\n     *                 ),\n     *                 @OA\\Property(property=\"total_pages\", type=\"integer\", example=3),\n     *                 @OA\\Property(property=\"current_page\", type=\"integer\", example=1),\n     *                 @OA\\Property(property=\"hasMorePages\", type=\"boolean\", example=true)\n     *             )\n     *         )\n     *     ),\n     *\n     *     @OA\\Response(\n     *         response=401,\n     *         description=\"Unauthenticated\",\n     *\n     *         @OA\\JsonContent(\n     *\n     *             @OA\\Property(property=\"successful\", type=\"boolean\", example=false),\n     *             @OA\\Property(property=\"message\", type=\"string\", example=\"Unauthenticated\"),\n     *             @OA\\Property(property=\"status_code\", type=\"integer\", example=401)\n     *         )\n     *     ),\n     *\n     *     @OA\\Response(\n     *         response=400,\n     *         description=\"Invalid sort column or direction. Allowed columns: name, address, created_at, updated_at. Allowed directions: asc, desc.\",\n     *\n     *         @OA\\JsonContent(\n     *\n     *             @OA\\Property(property=\"successful\", type=\"boolean\", example=false),\n     *             @OA\\Property(property=\"message\", type=\"string\", example=\"Invalid sort column or direction. Allowed columns: name, address, created_at, updated_at. Allowed directions: asc, desc.\"),\n     *             @OA\\Property(property=\"status_code\", type=\"integer\", example=400)\n     *         )\n     *     ),\n     *  )\n     */\n    public function index(Request $request): JsonResponse\n    {\n        return $this->storeService->getAllStores($request);\n    }\n\n    /**\n     * @OA\\Post(\n     *     path=\"/stores\",\n     *     tags={\"Store\"},\n     *     summary=\"Create a new store\",\n     *     security={{\"bearerAuth\":{}}},\n     *\n     *     @OA\\RequestBody(\n     *         required=true,\n     *\n     *         @OA\\MediaType(\n     *             mediaType=\"multipart/form-data\",\n     *\n     *             @OA\\Schema(\n     *                 type=\"object\",\n     *                 required={\"name\", \"address\",\"category_id\"},\n     *\n     *                 @OA\\Property(property=\"name\", type=\"string\", example=\"Abo Bashir\"),\n     *                 @OA\\Property(property=\"address\", type=\"string\", example=\"Damascus\"),\n     *                 @OA\\Property(property=\"image\", type=\"string\", format=\"binary\", nullable=true, example=\"Rp6d5o65aGlNo95BedbGJdC9whgIEfp6U2zw0Ck1.png\"),\n     *                 @OA\\Property(property=\"category_id\", type=\"int\", example=1),\n     *             )\n     *         )\n     *     ),\n     *\n     *     @OA\\Response(\n     *         response=201,\n     *         description=\"Store created successfully\",\n     *\n     *         @OA\\JsonContent(\n     *\n     *             @OA\\Property(property=\"successful\", type=\"boolean\", example=true),\n     *             @OA\\Property(property=\"message\", type=\"string\", example=\"Store created successfully!\"),\n     *             @OA\\Property(property=\"status_code\", type=\"integer\", example=201),\n     *             @OA\\Property(\n     *                 property=\"data\",\n     *                 type=\"object\",\n     *                 @OA\\Property(\n     *                     property=\"Store\",\n     *                     type=\"object\",\n     *                     @OA\\Property(property=\"id\", type=\"integer\", example=13),\n     *                     @OA\\Property(property=\"name\", type=\"string\", example=\"Abo Bashir\"),\n     *                     @OA\\Property(property=\"image\", type=\"string\", example=\"http://127.0.0.1:8000/storage/images/Rp6d5o65aGlNo95BedbGJdC9whgIEfp6U2zw0Ck1.png\"),\n     *                     @OA\\Property(property=\"address\", type=\"string\", example=\"Damascus\"),\n     *                     @OA\\Property(property=\"category\", type=\"string\", example=\"fruits\")\n     *                 )\n     *             )\n     *         )\n     *     ),\n     *\n     *     @OA\\Response(\n     *         response=400,\n     *         description=\"Validation failed\",\n     *\n     *         @OA\\JsonContent(\n     *\n     *             @OA\\Property(property=\"successful\", type=\"boolean\", example=false),\n     *             @OA\\Property(property=\"message\", type=\"string\", example=\"Validation failed\"),\n     *             @OA\\Property(property=\"status_code\", type=\"integer\", example=400),\n     *             @OA\\Property(\n     *                 property=\"data\",\n     *                 type=\"object\",\n     *                 @OA\\Property(property=\"name\", type=\"string\", example=\"The name field is required.\"),\n     *                 @OA\\Property(property=\"address\", type=\"string\", example=\"The address field is required.\"),\n     *                 @OA\\Property(property=\"category_id\", type=\"string\", example=\"The selected category is invalid.\")\n     *             )\n     *         )\n     *     ),\n     *\n     *     @OA\\Response(\n     *         response=401,\n     *         description=\"Unauthenticated\",\n     *\n     *         @OA\\JsonContent(\n     *\n     *             @OA\\Property(property=\"successful\", type=\"boolean\", example=false),\n     *             @OA\\Property(property=\"message\", type=\"string\", example=\"Unauthenticated\"),\n     *             @OA\\Property(property=\"status_code\", type=\"integer\", example=401)\n     *         )\n     *     ),\n     *\n     *          @OA\\Response(\n     *          response=404,\n     *          description=\"Store Not Found\",\n     *\n     *          @OA\\JsonContent(\n     *\n     *             @OA\\Property(property=\"successful\", type=\"boolean\", example=false),\n     *              @OA\\Property(property=\"message\", type=\"string\", example=\"Store Not Found\"),\n     *              @OA\\Property(property=\"status_code\", type=\"integer\", example=404)\n     *          )\n     *      )\n     * )\n     */\n    public function store(StoreCreateRequest $request): JsonResponse\n    {\n        return $this->storeService->createStore($request->validated(), $request);\n    }\n\n    /**\n     * @OA\\Get(\n     *     path=\"/api/stores/{id}\",\n     *     tags={\"Store\"},\n     *     summary=\"Retrieve a specific store by ID\",\n     *     security={{\"bearerAuth\":{}}},\n     *\n     *     @OA\\Parameter(\n     *         name=\"id\",\n     *         in=\"path\",\n     *         description=\"ID of the store to retrieve\",\n     *         required=true,\n     *\n     *         @OA\\Schema(type=\"integer\" , example=12)\n     *     ),\n     *\n     *     @OA\\Response(\n     *         response=200,\n     *         description=\"Store retrieved successfully\",\n     *\n     *         @OA\\JsonContent(\n     *\n     *             @OA\\Property(property=\"successful\", type=\"boolean\", example=true),\n     *             @OA\\Property(property=\"message\", type=\"string\", example=\"Store retrieved successfully!\"),\n     *             @OA\\Property(property=\"status_code\", type=\"integer\", example=200),\n     *             @OA\\Property(\n     *                 property=\"data\",\n     *                 type=\"object\",\n     *                 @OA\\Property(\n     *                     property=\"Store\",\n     *                     type=\"object\",\n     *                     @OA\\Property(property=\"id\", type=\"integer\", example=10),\n     *                     @OA\\Property(property=\"name\", type=\"string\", example=\"Dietrich and Sons\"),\n     *                     @OA\\Property(property=\"image\", type=\"string\", example=\"https://via.placeholder.com/640x480.png/0033ff?text=technics+sit\"),\n     *                     @OA\\Property(property=\"address\", type=\"string\", example=\"21464 Ortiz Pines\\nEast Ethelton, MO 97340\"),\n     *                     @OA\\Property(property=\"category\", type=\"string\", example=\"fruits\")\n     *                 )\n     *             )\n     *         )\n     *     ),\n     *\n     *     @OA\\Response(\n     *         response=401,\n     *         description=\"Unauthenticated\",\n     *\n     *         @OA\\JsonContent(\n     *\n     *             @OA\\Property(property=\"successful\", type=\"boolean\", example=false),\n     *             @OA\\Property(property=\"message\", type=\"string\", example=\"Unauthenticated\"),\n     *             @OA\\Property(property=\"status_code\", type=\"integer\", example=401)\n     *         )\n     *     )\n     * )\n     */\n    public function show(Store $store): JsonResponse\n    {\n        return $this->storeService->getStoreById($store);\n    }\n\n    /**\n     * @OA\\Post(\n     *     path=\"/stores/{id}\",\n     *     tags={\"Store\"},\n     *     summary=\"Update an existing store\",\n     *     security={{\"bearerAuth\":{}}},\n     *\n     *     @OA\\Parameter(\n     *         name=\"id\",\n     *         in=\"path\",\n     *         description=\"The ID of the store to be updated\",\n     *         required=true,\n     *\n     *         @OA\\Schema(type=\"integer\", example=12)\n     *     ),\n     *\n     *     @OA\\RequestBody(\n     *         required=true,\n     *\n     *         @OA\\MediaType(\n     *             mediaType=\"multipart/form-data\",\n     *\n     *             @OA\\Schema(\n     *                 type=\"object\",\n     *\n     *                 @OA\\Property(property=\"name\", type=\"string\", example=\"Osuama\"),\n     *                 @OA\\Property(property=\"address\", type=\"string\", example=\"Midan\"),\n     *                 @OA\\Property(property=\"image\", type=\"string\", format=\"binary\", nullable=true, example=\"new_image.png\"),\n     *                 @OA\\Property(property=\"category_id\", type=\"int\", example=\"1.\")\n     *             )\n     *         )\n     *     ),\n     *\n     *     @OA\\Response(\n     *         response=200,\n     *         description=\"Store updated successfully\",\n     *\n     *         @OA\\JsonContent(\n     *\n     *             @OA\\Property(property=\"successful\", type=\"boolean\", example=true),\n     *             @OA\\Property(property=\"message\", type=\"string\", example=\"Store updated successfully!\"),\n     *             @OA\\Property(property=\"status_code\", type=\"integer\", example=200),\n     *             @OA\\Property(\n     *                 property=\"data\",\n     *                 type=\"object\",\n     *                 @OA\\Property(\n     *                     property=\"Store\",\n     *                     type=\"object\",\n     *                     @OA\\Property(property=\"id\", type=\"integer\", example=12),\n     *                     @OA\\Property(property=\"name\", type=\"string\", example=\"Osuama\"),\n     *                     @OA\\Property(property=\"image\", type=\"string\", example=\"http://127.0.0.1:8000/storage/images/qRERai5pFIvaN2SfoItlFqRUjlPseUwWqdnoiSsd.png\"),\n     *                     @OA\\Property(property=\"address\", type=\"string\", example=\"Midan\"),\n     *                     @OA\\Property(property=\"category\", type=\"string\", example=\"vegetables\")\n     *                 )\n     *             )\n     *         )\n     *     ),\n     *\n     *     @OA\\Response(\n     *         response=401,\n     *         description=\"Unauthenticated\",\n     *\n     *         @OA\\JsonContent(\n     *\n     *             @OA\\Property(property=\"successful\", type=\"boolean\", example=false),\n     *             @OA\\Property(property=\"message\", type=\"string\", example=\"Unauthenticated\"),\n     *             @OA\\Property(property=\"status_code\", type=\"integer\", example=401)\n     *         )\n     *     ),\n     *\n     *     @OA\\Response(\n     *         response=403,\n     *         description=\"You are not authorized to update this Store\",\n     *\n     *         @OA\\JsonContent(\n     *\n     *             @OA\\Property(property=\"successful\", type=\"boolean\", example=false),\n     *             @OA\\Property(property=\"message\", type=\"string\", example=\"You are not authorized to update this Store.\"),\n     *             @OA\\Property(property=\"status_code\", type=\"integer\", example=403)\n     *         )\n     *     ),\n     *\n     *     @OA\\Response(\n     *         response=404,\n     *         description=\"Store Not Found\",\n     *\n     *         @OA\\JsonContent(\n     *\n     *             @OA\\Property(property=\"successful\", type=\"boolean\", example=false),\n     *             @OA\\Property(property=\"message\", type=\"string\", example=\"Store Not Found\"),\n     *             @OA\\Property(property=\"status_code\", type=\"integer\", example=404)\n     *         )\n     *     )\n     * )\n     */\n    public function update(StoreUpdateRequest $request, Store $store): JsonResponse\n    {\n        return $this->storeService->updateStore($store, $request->validated());\n    }\n\n    /**\n     * @OA\\Delete(\n     *     path=\"/stores/{id}\",\n     *     tags={\"Store\"},\n     *     summary=\"Delete a store\",\n     *     security={{\"bearerAuth\":{}}},\n     *\n     *     @OA\\Parameter(\n     *         name=\"id\",\n     *         in=\"path\",\n     *         description=\"The ID of the store to be deleted\",\n     *         required=true,\n     *\n     *         @OA\\Schema(type=\"integer\", example=12)\n     *     ),\n     *\n     *     @OA\\Response(\n     *         response=200,\n     *         description=\"Store deleted successfully\",\n     *\n     *         @OA\\JsonContent(\n     *\n     *             @OA\\Property(property=\"successful\", type=\"boolean\", example=true),\n     *             @OA\\Property(property=\"message\", type=\"string\", example=\"Store deleted successfully!\"),\n     *             @OA\\Property(property=\"status_code\", type=\"integer\", example=200)\n     *         )\n     *     ),\n     *\n     *     @OA\\Response(\n     *         response=401,\n     *         description=\"Unauthenticated\",\n     *\n     *         @OA\\JsonContent(\n     *\n     *             @OA\\Property(property=\"successful\", type=\"boolean\", example=false),\n     *             @OA\\Property(property=\"message\", type=\"string\", example=\"Unauthenticated\"),\n     *             @OA\\Property(property=\"status_code\", type=\"integer\", example=401)\n     *         )\n     *     ),\n     *\n     *     @OA\\Response(\n     *         response=403,\n     *         description=\"You are not authorized to delete this Store\",\n     *\n     *         @OA\\JsonContent(\n     *\n     *             @OA\\Property(property=\"successful\", type=\"boolean\", example=false),\n     *             @OA\\Property(property=\"message\", type=\"string\", example=\"You are not authorized to delete this Store.\"),\n     *             @OA\\Property(property=\"status_code\", type=\"integer\", example=403)\n     *         )\n     *     ),\n     *\n     *     @OA\\Response(\n     *         response=404,\n     *         description=\"Store Not Found\",\n     *\n     *         @OA\\JsonContent(\n     *\n     *             @OA\\Property(property=\"successful\", type=\"boolean\", example=false),\n     *             @OA\\Property(property=\"message\", type=\"string\", example=\"Store Not Found\"),\n     *             @OA\\Property(property=\"status_code\", type=\"integer\", example=404)\n     *         )\n     *     )\n     * )\n     */\n    public function destroy(Store $store): JsonResponse\n    {\n        return $this->storeService->deleteStore($store);\n    }\n}"
        }
    ]
}